<!--
  @fileoverview BenchmarkTypeSelection component that allows users to select the type of benchmark query.
  @component BenchmarkTypeSelection
  @author Eva Ray
  @description This component provides a selection interface for different types of benchmark queries, such as unique
  queries, custom queries, and workloads. It emits the selected type to the parent component.
  The style has been generated by an LLM.
-->

<script setup>
import { ref } from 'vue'

const emit = defineEmits(['type-selected'])

const types = [
  { id: 'unique', name: 'Unique Query', endpoint: '/benchmark/unique' },
  { id: 'custom', name: 'Custom Query', endpoint: '/benchmark/unique-custom' },
  { id: 'workload', name: 'Workload', endpoint: '/benchmark/workload' },
  { id: 'custom-workload', name: 'Custom Workload', endpoint: '/benchmark/workload-custom' }
]

defineExpose({
  getSelections: () => {
    return {
      endpoint: types.find(type => type.id === selectedType.value)?.endpoint || 'benchmark/unique'
    }
  }
})

const selectedType = ref('unique')

/**
 * Handles the change of the selected benchmark type.
 * Emits the selected type to the parent component.
 */
const handleTypeChange = () => {
  const selected = types.find(type => type.id === selectedType.value)
  if (selected) {
    emit('type-selected', selected)
  }
}
</script>

<template>
  <div class="benchmark-type-selection">
    <h3>Benchmark Type</h3>

    <div class="card-grid">
      <label
          v-for="type in types"
          :key="type.id"
          class="selection-card"
          :class="{ 'selected': selectedType === type.id }"
      >
        <input
            type="radio"
            :value="type.id"
            v-model="selectedType"
            @change="handleTypeChange"
        />
        <div class="selection-card-content">
          <div class="radio-indicator"></div>
          <span class="text-primary">{{ type.name }}</span>
          <span class="text-secondary">{{ type.endpoint }}</span>
        </div>
      </label>
    </div>
  </div>
</template>

<style>
.benchmark-type-selection {
  width: 100%;
  max-width: 800px;
  margin: 0 auto 20px;
}
</style>
